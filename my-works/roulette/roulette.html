<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ルーレット</title>
    <link href="https://fonts.googleapis.com/css?family=Major+Mono+Display|Oswald" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Gugi" rel="stylesheet">
    <link rel=stylesheet href="css/roulette.css">
</head>
<body>
    <div class="container">
        <h1>Roulette</h1>
        <table>
          <!--<tr><td id ="td1">1</td><td id ="td2">2</td><td id ="td3">3</td><td id ="td4">4</td>-->
          <!--<tr><td id ="td5">5</td><td id ="td6">6</td><td id ="td7">7</td><td id ="td8">8</td>-->
          <!--<tr><td id ="td9">9</td><td id ="td10">10</td><td id ="td11">11</td><td id ="td12">12</td>-->
          <!--<tr><td id ="td13">13</td><td id ="td14">14</td><td id ="td15">15</td><td id ="td16">16</td>-->
        </table>
        <div class="button">
            <div id="start"><div>START</div></div>
            <div id="stop"><div  class="disabled">STOP</div></div>
            <div id="reset"><div>RESET</div></div>
        </div>
    </div>
    
    <script src="http://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
    $(function() {
        var timer_id;
        // var start_flag = false;
        // var stop_flag = true;
        // var reset_flag = true;
         
        var pool = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16];
        var num;
        
        var count = 1;
        
        for (var i = 1; i <= 4; i++) {
            $('table').append('<tr></tr>');
            for(var j = 1; j <= 4; j++) {
             $('table tr:last-child').append('<td id = "td'+ count+ '">'+ count+'</td>');
             count++;
            }
        }
         
       function roulette() {
          $('#td'+ num).css('background-color', '#fff');
           num = Math.floor(Math.random() * pool.length);
           num = pool[num];
           $('#td'+ num).css('background-color', '#f00');
       }


        $('#start').click(function() {
            // roulette_start();
            // if (start_flag === false) {
            if (!$('#start div').hasClass('disabled')) {
                
            // }
            timer_id = setInterval(roulette, 200);
            // start_flag = true;
            // stop_flag = false;
            // reset_flag = true;
            $('#start div').addClass('disabled');
            $('#stop div').removeClass('disabled');
            // $('#reset div').addClass('disabled');
            }
        });
        
        $('#stop').click(function() {
            // if (stop_flag === false) {
            if (!$('#stop div').hasClass('disabled')) {

                clearInterval(timer_id);
                // start_flag = false;
                // stop_flag = true;
                // reset_flag = false;
                var result = pool.indexOf(num);
                pool.splice(result, 1);
                $('#td'+ num).css('background-color', '#FCD4D8');
                num = 0;
                if (pool.length === 0) {
                $('#start div').addClass('disabled');
                } else {
                    $('#start div').removeClass('disabled');
                    $('#stop div').addClass('disabled');
                }
                // $('#reset div').removeClass('disabled');
            }
        });
        
        $('#reset').click(function() {
            // if (reset_flag === false) {
                clearInterval(timer_id);
                // start_flag = false;
                // stop_flag = false;
                // reset_flag = true;
                $('#start div').removeClass('disabled');
                $('#stop div').addClass('disabled');
                // $('#reset div').addClass('disabled');
                $('td').css('background-color', '#fff');
                pool = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16];
            // }
        });

        
    });
    </script>
</body>
</html>